<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DCA Calculator</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Prompt:wght@100;200;300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="../css/calculator.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <div class="sidebar">
        <ul class="menu">
            <li><a href="start.html"><i class="fas fa-bullseye"></i> กำหนดเป้าหมายใหม่</a></li>
            <li><a href="calendar.html"><i class="fas fa-calendar-alt"></i> ปฏิทินรายรับ-รายจ่าย</a></li>
            <li><a href="dashboard(before).html"><i class="fas fa-file-alt"></i> รายงานธุรกรรม</a></li>
            
            <li class="has-submenu">
                <a href="#" class="toggle-submenu"><i class="fas fa-chart-line"></i> ลงทุนDCA <i class="fas fa-chevron-down arrow"></i></a>
                <ul class="submenu">
                    <li><a href="calculator.html">คำนวณDCA</a></li>
                    <li><a href="dca-progress.html">ความคืบหน้าของDCA</a></li>
                </ul>
            </li>
    
            <li class="has-submenu">
                <a href="#" class="toggle-submenu"><i class="fas fa-credit-card"></i> การชำระผ่อน <i class="fas fa-chevron-down arrow"></i></a>
                <ul class="submenu">
                    <li><a href="install-plan.html">แบบจำลองการซ้อมผ่อน</a></li>
                    <li><a href="install-progress.html">ความคืบหน้าของการซ้อมผ่อน</a></li>
                </ul>
            </li>
    
            <li class="has-submenu">
                <a href="#" class="toggle-submenu"><i class="fas fa-piggy-bank"></i> การออมเงิน <i class="fas fa-chevron-down arrow"></i></a>
                <ul class="submenu">
                    <li><a href="saving-progress.html">ความคืบหน้าของการออมเงิน</a></li>
                </ul>
            </li>
    
            <li><a href="adjust.html"><i class="fas fa-cogs"></i> ปรับแผนการเงิน</a></li>
        </ul>
    </div>
    
    <div class="container">
        <div class="title">DCA Calculator</div>
        <form class="dca-form" id="dcaForm">
            <label for="monthly-investment" class="form-label">ลงทุนเดือนละ:</label>
            <input type="number" id="monthly-investment" class="form-input" placeholder="บาท" required>

            <label for="investment-duration" class="form-label">ทำซ้ำเป็นเวลา:</label>
            <input type="number" id="investment-duration" class="form-input" placeholder="ปี" required>

            <label for="interest-rate" class="form-label">อัตราดอกเบี้ย:</label>
            <input type="number" id="interest-rate" class="form-input" placeholder="%" required>

            <a href="dca-progress.html" class="submit-button" onclick="calculateDCA()">Calculate &rarr;</a>

        </form>

        <canvas id="dcaChart" class="chart"></canvas>
    </div>

    <script>
        function calculateDCA() {
            const monthlyInvestment = parseFloat(document.getElementById('monthly-investment').value);
            const duration = parseFloat(document.getElementById('investment-duration').value) * 12; // Convert years to months
            const interestRate = parseFloat(document.getElementById('interest-rate').value) / 100;
            
            let totalInvested = 0;
            let finalAmount = 0;

            for (let i = 0; i < duration; i++) {
                totalInvested += monthlyInvestment;
                finalAmount = (finalAmount + monthlyInvestment) * (1 + interestRate / 12);
            }

            updateChart(totalInvested, finalAmount);
        }

        function updateChart(totalInvested, finalAmount) {
            const ctx = document.getElementById('dcaChart').getContext('2d');
            new Chart(ctx, {
                type: 'pie',
                data: {
                    labels: ['Total Invested', 'Final Amount'],
                    datasets: [{
                        data: [totalInvested, finalAmount - totalInvested],
                        backgroundColor: ['#007bff', '#ffc107']
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: {
                            display: true,
                            position: 'bottom'
                        }
                    }
                }
            });
        }
        
    </script>
    <script src="/BudgetBuddy/javascript/nav.js"></script>
</body>
</html>
